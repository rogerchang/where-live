package controllers

import engine.LocationClusterer
import model.{Features, Facet, LatLng}
import play.api._
import play.api.libs.json._
import play.api.Play.current
import play.api.mvc._

object Application extends Controller with ImplicitJsonConversions {

    val file = Play.getFile("/public/data/facets.json")
//    val facetsJson = Json.parse(scala.io.Source.fromFile(file).mkString)
    val facetsJson = Json.parse("[{\"id\":\"farmers_markets\",\"name\":\"Farmer's Markets\",\"description\":\"Bunch o Farmer's markets\",\"latlngs\":[{\"lat\":-75.15351422696591,\"lng\":40.0642869592902},{\"lat\":-75.16557534962762,\"lng\":39.94366578936093},{\"lat\":-75.17580569966763,\"lng\":40.05224273651458},{\"lat\":-75.22459124657384,\"lng\":39.96489703705053},{\"lat\":-75.18113409189326,\"lng\":39.94900956279253},{\"lat\":-75.20926016382735,\"lng\":39.9495427533085},{\"lat\":-75.17398419917924,\"lng\":39.96731515723125},{\"lat\":-75.09103696434086,\"lng\":40.038219429647064},{\"lat\":-75.13135626822707,\"lng\":39.9776010949741},{\"lat\":-75.157915628206,\"lng\":39.97870886282806},{\"lat\":-75.17800233087696,\"lng\":40.03969624184227},{\"lat\":-75.1793224640284,\"lng\":39.94733248892104},{\"lat\":-75.14545021755336,\"lng\":39.94216132153635},{\"lat\":-75.25400064045388,\"lng\":39.988305892664954},{\"lat\":-75.13578148314542,\"lng\":39.98201048201309},{\"lat\":-75.16974563149225,\"lng\":39.92441044323712},{\"lat\":-75.19203532570627,\"lng\":39.937280957122006},{\"lat\":-75.18142029896461,\"lng\":39.93216287811089},{\"lat\":-75.14718399147704,\"lng\":40.01661061382275},{\"lat\":-75.14475014085997,\"lng\":40.03907393904521},{\"lat\":-75.13835217629625,\"lng\":39.99185285819168},{\"lat\":-75.07684195299659,\"lng\":40.023258983124464},{\"lat\":-75.18706037715283,\"lng\":39.988666433916535},{\"lat\":-75.22853427392626,\"lng\":39.9357337581417},{\"lat\":-75.15943563194325,\"lng\":39.9539547192862},{\"lat\":-75.17066850897568,\"lng\":39.95013286702005},{\"lat\":-75.15040769970526,\"lng\":39.941775749879035},{\"lat\":-75.19226244667195,\"lng\":40.06179169679199},{\"lat\":-75.19478732658696,\"lng\":39.95314325902351},{\"lat\":-75.16309117241214,\"lng\":39.929793806886444},{\"lat\":-75.1804358665494,\"lng\":39.97417032433303},{\"lat\":-75.16467033477929,\"lng\":39.96285232037299},{\"lat\":-75.1411437791317,\"lng\":40.018897970159394},{\"lat\":-75.20651346016339,\"lng\":40.014846781702666},{\"lat\":-75.19733737719221,\"lng\":40.067707880357794},{\"lat\":-75.22129409834346,\"lng\":40.0375200654432},{\"lat\":-75.15116060425166,\"lng\":39.92696324904875},{\"lat\":-75.17164195810733,\"lng\":39.95337531313469},{\"lat\":-75.18333505421568,\"lng\":39.95482001353147},{\"lat\":-75.14145329205503,\"lng\":39.96063172477239},{\"lat\":-75.15943563194325,\"lng\":39.9539547192862},{\"lat\":-75.21850058557811,\"lng\":39.96612203633589},{\"lat\":-75.12157142555792,\"lng\":39.978415086128884},{\"lat\":-75.17311218409415,\"lng\":40.07996340687988},{\"lat\":-75.17668185215118,\"lng\":40.006055443723795},{\"lat\":-75.18948954215386,\"lng\":39.95559420676949},{\"lat\":-75.19704010163942,\"lng\":39.95956598551194},{\"lat\":-75.20529680754498,\"lng\":40.07535485198577},{\"lat\":-75.19591356739846,\"lng\":40.046378534551636},{\"lat\":-75.21977054047713,\"lng\":40.04909965857696},{\"lat\":-75.2131441248105,\"lng\":39.958535153528146},{\"lat\":-75.15988541101908,\"lng\":39.951914338953856},{\"lat\":-75.16854548018748,\"lng\":40.03195776952754},{\"lat\":-75.22705494951187,\"lng\":39.97031939021523},{\"lat\":-75.21903737844848,\"lng\":39.94240725823136},{\"lat\":-75.16763362487211,\"lng\":39.98775312585925},{\"lat\":-75.21645614986149,\"lng\":39.9980405781093},{\"lat\":-75.17977946422124,\"lng\":39.97718982465539},{\"lat\":-75.160495734099,\"lng\":39.966684833189085},{\"lat\":-75.16678176437374,\"lng\":40.03469132263272},{\"lat\":-75.17304129607226,\"lng\":40.080033507225664},{\"lat\":-75.2381825787722,\"lng\":40.05977234479627}]},{\"id\":\"older_adult_centers\",\"name\":\"Older Adult Centers\",\"description\":\"A lof of Centers\",\"latlngs\":[{\"lat\":-75.17042797286103,\"lng\":39.9806580525795},{\"lat\":-75.13803899847382,\"lng\":40.000435694697536},{\"lat\":-75.15423921057176,\"lng\":40.06434319649626},{\"lat\":-75.10440180907992,\"lng\":40.00362657144409},{\"lat\":-75.06288605833824,\"lng\":40.055168774940284},{\"lat\":-75.16227297453915,\"lng\":39.931437270666386}]},{\"id\":\"rec_facilities\",\"name\":\"Rec Facilities\",\"description\":\"A lof of Rec Facilities\",\"latlngs\":[{\"lat\":-75.15394032004735,\"lng\":39.915309520885685},{\"lat\":-75.21030083649092,\"lng\":39.94186132092433},{\"lat\":-75.15125431658686,\"lng\":39.96685962933934},{\"lat\":-75.14514307095446,\"lng\":39.973429751603206},{\"lat\":-75.02732054701468,\"lng\":40.03599763264957},{\"lat\":-75.11847077019466,\"lng\":39.98049473515868},{\"lat\":-75.18208546466734,\"lng\":40.05737222412285},{\"lat\":-75.17884045558927,\"lng\":39.97777957769221},{\"lat\":-75.16648111745035,\"lng\":40.02381579098573},{\"lat\":-75.09279758751573,\"lng\":40.021023066151045},{\"lat\":-75.09934076763791,\"lng\":39.98256158992873},{\"lat\":-75.24046770463204,\"lng\":39.98190194585638},{\"lat\":-75.18323351515976,\"lng\":39.93554427259453},{\"lat\":-75.1564242000997,\"lng\":40.042716169991095},{\"lat\":-75.1647869090324,\"lng\":39.93316437326655},{\"lat\":-75.15982398954934,\"lng\":39.93381792523128},{\"lat\":-75.18930026712334,\"lng\":39.93130344474229},{\"lat\":-75.18335205597977,\"lng\":39.948048215867665},{\"lat\":-75.18787383376414,\"lng\":40.05797975501737},{\"lat\":-75.22961549617453,\"lng\":40.03343855280864},{\"lat\":-75.17894573542331,\"lng\":39.91580121945532},{\"lat\":-75.08000630171087,\"lng\":40.02462954537348},{\"lat\":-75.15085064886348,\"lng\":39.97558264385436},{\"lat\":-75.13226612897023,\"lng\":39.977884533216},{\"lat\":-75.15173826512941,\"lng\":39.93390146159879},{\"lat\":-75.17497315027639,\"lng\":39.98768312415109},{\"lat\":-75.17920626813404,\"lng\":40.04802170263217},{\"lat\":-75.17592358197417,\"lng\":40.08157926821442},{\"lat\":-75.16724669634664,\"lng\":39.96845588349019},{\"lat\":-75.1750504435002,\"lng\":40.00224516180566},{\"lat\":-75.17163606854065,\"lng\":39.94201631538208},{\"lat\":-75.04436525604403,\"lng\":40.028411015015216},{\"lat\":-75.12084290849752,\"lng\":40.021951103012775},{\"lat\":-75.15814317988529,\"lng\":39.94135371013552},{\"lat\":-75.23437536802048,\"lng\":39.94870687385507},{\"lat\":-75.24897245867824,\"lng\":39.90842208226822},{\"lat\":-75.06104426702241,\"lng\":40.029368120376795},{\"lat\":-75.09836615563712,\"lng\":39.99776001558819},{\"lat\":-75.17401897411024,\"lng\":39.9382425885665},{\"lat\":-75.19280868647334,\"lng\":39.93800265515426},{\"lat\":-75.2159723730105,\"lng\":39.96582808745779},{\"lat\":-75.19584863095756,\"lng\":39.96762444166115},{\"lat\":-75.16810262139583,\"lng\":39.965666290330894},{\"lat\":-75.2274909727652,\"lng\":39.97531462668712},{\"lat\":-75.09715113998357,\"lng\":39.99063748212316},{\"lat\":-75.04810036362944,\"lng\":40.02162340193932},{\"lat\":-75.14921670192055,\"lng\":39.9968161856326},{\"lat\":-75.15298517877463,\"lng\":39.94279279227262},{\"lat\":-75.1729381361041,\"lng\":39.922891735893394},{\"lat\":-75.16958114909144,\"lng\":39.92908111883127},{\"lat\":-75.15163252811988,\"lng\":39.986030185713396},{\"lat\":-75.15926862294559,\"lng\":39.94361008366614},{\"lat\":-75.13736172407205,\"lng\":39.97286905016491},{\"lat\":-75.1351283098992,\"lng\":39.97843289460558},{\"lat\":-75.12802175752401,\"lng\":39.97177301317511},{\"lat\":-75.14598759658061,\"lng\":39.93493147640153},{\"lat\":-75.16030583006473,\"lng\":39.981631098933406},{\"lat\":-75.16346410788762,\"lng\":39.93844765469559},{\"lat\":-75.2311984217678,\"lng\":39.977364468608826},{\"lat\":-75.14747610620704,\"lng\":39.98312462410116},{\"lat\":-75.13819574612641,\"lng\":39.989064645074926},{\"lat\":-75.14359038792013,\"lng\":39.96276798596826},{\"lat\":-75.10140077495895,\"lng\":39.986459571216805},{\"lat\":-75.18521030165684,\"lng\":39.96892787349792},{\"lat\":-75.12937275285984,\"lng\":40.00195847900957},{\"lat\":-75.02187550671383,\"lng\":40.09036021096163},{\"lat\":-75.16763537763994,\"lng\":39.99361595680805},{\"lat\":-75.16133207499749,\"lng\":40.00635772908881},{\"lat\":-75.14367727236433,\"lng\":40.01684011300395},{\"lat\":-75.06855540322435,\"lng\":40.02444298358562},{\"lat\":-75.16318704669385,\"lng\":40.05364661150279},{\"lat\":-75.13174260387247,\"lng\":40.0433523594902},{\"lat\":-74.96923006737303,\"lng\":40.103676569742845},{\"lat\":-75.25138766392114,\"lng\":39.90528974294348},{\"lat\":-74.99004398004561,\"lng\":40.09797767882956},{\"lat\":-75.23146033066277,\"lng\":39.914832416551526},{\"lat\":-75.10159378241266,\"lng\":40.04668997442121},{\"lat\":-75.04958179172068,\"lng\":40.02920529181486},{\"lat\":-75.05357475167342,\"lng\":40.01871738644831},{\"lat\":-75.00222706176133,\"lng\":40.05124399409347},{\"lat\":-75.08112353674127,\"lng\":40.0730194870369},{\"lat\":-74.99798348035019,\"lng\":40.059015860048376},{\"lat\":-75.15814139576713,\"lng\":40.06086949689749},{\"lat\":-75.11688589526011,\"lng\":40.0425482436433},{\"lat\":-75.0331884579784,\"lng\":40.03005976719758},{\"lat\":-75.07025282195687,\"lng\":40.03830139253854},{\"lat\":-74.97370954887252,\"lng\":40.08069075285177},{\"lat\":-75.2027660910943,\"lng\":40.01260241289222},{\"lat\":-75.03299507784652,\"lng\":40.10065179356722},{\"lat\":-75.07563389159722,\"lng\":40.01407140883458},{\"lat\":-75.07431898374475,\"lng\":40.011351584414406},{\"lat\":-75.05028592774134,\"lng\":40.06141076048},{\"lat\":-75.07683449131771,\"lng\":40.05584490980542},{\"lat\":-75.0073965413047,\"lng\":40.12271182550899},{\"lat\":-75.15241655700892,\"lng\":40.02459048867514},{\"lat\":-75.01019653671464,\"lng\":40.056402850677415},{\"lat\":-75.25695205826298,\"lng\":39.97490707430412},{\"lat\":-75.20104723803587,\"lng\":40.07549205653544},{\"lat\":-75.0248727201427,\"lng\":40.04736229916904},{\"lat\":-74.98989180138109,\"lng\":40.07983623028192},{\"lat\":-75.21025356457828,\"lng\":39.96166313365563},{\"lat\":-75.21723079613568,\"lng\":39.94266015353474},{\"lat\":-75.09381355385477,\"lng\":40.02905235116852},{\"lat\":-75.23111177997379,\"lng\":40.0692446777807},{\"lat\":-75.234668738807,\"lng\":39.96699324910068},{\"lat\":-75.21176870585715,\"lng\":40.028823687998795},{\"lat\":-75.06759702725539,\"lng\":39.99922220974159},{\"lat\":-75.24934919660896,\"lng\":39.95827511452214},{\"lat\":-75.22884831650076,\"lng\":39.9345427123111},{\"lat\":-75.18732206076889,\"lng\":39.92537580840664},{\"lat\":-75.1866712275616,\"lng\":40.008948030025635},{\"lat\":-75.11881090757012,\"lng\":40.03417672867071},{\"lat\":-74.99123794986403,\"lng\":40.06786325789785},{\"lat\":-75.16961687171138,\"lng\":40.06485223087143},{\"lat\":-75.02501987626998,\"lng\":40.11510999008699},{\"lat\":-75.14684524411832,\"lng\":40.050585487539365},{\"lat\":-75.1217438526015,\"lng\":39.999977522899485},{\"lat\":-75.02636866253236,\"lng\":40.06091331980165},{\"lat\":-75.09660616332135,\"lng\":40.01246262328616},{\"lat\":-75.12386524142927,\"lng\":40.04898211403582},{\"lat\":-75.13584652634097,\"lng\":40.030398409837034},{\"lat\":-75.23981631512012,\"lng\":39.926325133072076},{\"lat\":-75.13744606156696,\"lng\":40.000524600540714},{\"lat\":-75.0540734294282,\"lng\":40.025626774218296},{\"lat\":-75.13655265673324,\"lng\":40.038034095712874},{\"lat\":-75.25109082427464,\"lng\":39.96886388227106},{\"lat\":-75.22338820972777,\"lng\":39.9677560899338},{\"lat\":-75.1699191174855,\"lng\":39.98104166145989},{\"lat\":-75.15922271326016,\"lng\":40.050052941936315},{\"lat\":-75.21300813981705,\"lng\":39.979216221683885},{\"lat\":-74.97272010097429,\"lng\":40.09607347846903},{\"lat\":-75.16854472355195,\"lng\":40.044959292012095},{\"lat\":-75.111845885394,\"lng\":39.984324184317686}]},{\"id\":\"elementarySchools\",\"name\":\"Elementary Schools\",\"description\":\"Elementary Schools\",\"latlngs\":[{\"lat\":-75.230257,\"lng\":40.031349},{\"lat\":-75.087213,\"lng\":40.025068},{\"lat\":-75.142132,\"lng\":39.994503},{\"lat\":-75.158909,\"lng\":39.985761},{\"lat\":-75.110419,\"lng\":39.983391},{\"lat\":-75.17399,\"lng\":39.977609},{\"lat\":-75.211378,\"lng\":39.966026},{\"lat\":-75.163281,\"lng\":39.934614},{\"lat\":-74.988989,\"lng\":40.067423},{\"lat\":-75.052445,\"lng\":40.066559},{\"lat\":-75.081382,\"lng\":40.062156},{\"lat\":-75.148413,\"lng\":40.058764},{\"lat\":-75.134505,\"lng\":40.030226},{\"lat\":-75.166406,\"lng\":40.026123},{\"lat\":-75.105178,\"lng\":39.996242},{\"lat\":-75.139251,\"lng\":39.986392},{\"lat\":-75.183519,\"lng\":39.985397},{\"lat\":-75.145859,\"lng\":39.972315},{\"lat\":-75.23026,\"lng\":39.94746},{\"lat\":-75.163406,\"lng\":39.915348},{\"lat\":-75.009142,\"lng\":40.120918},{\"lat\":-75.08054,\"lng\":40.074556},{\"lat\":-75.195179,\"lng\":40.059516},{\"lat\":-75.138481,\"lng\":40.055131},{\"lat\":-75.196544,\"lng\":40.046261},{\"lat\":-75.105178,\"lng\":40.034303},{\"lat\":-75.213,\"lng\":40.030918},{\"lat\":-75.08742,\"lng\":40.014759},{\"lat\":-75.137616,\"lng\":40.015077},{\"lat\":-75.120911,\"lng\":39.996916},{\"lat\":-75.145188,\"lng\":39.989236},{\"lat\":-75.196078,\"lng\":39.958684},{\"lat\":-75.243686,\"lng\":39.952946},{\"lat\":-75.170884,\"lng\":39.940374},{\"lat\":-75.239793,\"lng\":39.927281},{\"lat\":-75.208126,\"lng\":39.952688},{\"lat\":-75.023575,\"lng\":40.114184},{\"lat\":-75.084131,\"lng\":40.038894},{\"lat\":-75.061689,\"lng\":40.029722},{\"lat\":-75.129996,\"lng\":40.00246},{\"lat\":-75.154257,\"lng\":39.979119},{\"lat\":-75.212312,\"lng\":39.975025},{\"lat\":-75.153637,\"lng\":39.97231},{\"lat\":-75.194309,\"lng\":39.96659},{\"lat\":-75.152597,\"lng\":39.944528},{\"lat\":-75.177014,\"lng\":39.924533},{\"lat\":-75.151026,\"lng\":39.918794},{\"lat\":-75.176728,\"lng\":39.914449},{\"lat\":-75.178737,\"lng\":39.975543},{\"lat\":-75.057751,\"lng\":40.058539},{\"lat\":-75.161565,\"lng\":40.047815},{\"lat\":-75.075404,\"lng\":40.030067},{\"lat\":-75.066742,\"lng\":40.000232},{\"lat\":-75.184568,\"lng\":39.991164},{\"lat\":-75.177679,\"lng\":39.989975},{\"lat\":-75.146441,\"lng\":39.982115},{\"lat\":-75.135948,\"lng\":39.974868},{\"lat\":-75.13004,\"lng\":39.972578},{\"lat\":-75.215151,\"lng\":39.972537},{\"lat\":-75.23548,\"lng\":39.955187},{\"lat\":-75.216616,\"lng\":39.954129},{\"lat\":-75.156098,\"lng\":39.92982},{\"lat\":-75.181224,\"lng\":39.929379},{\"lat\":-75.16057,\"lng\":39.920888},{\"lat\":-75.236933,\"lng\":39.916319},{\"lat\":-75.254807,\"lng\":39.973823},{\"lat\":-75.009463,\"lng\":40.05504},{\"lat\":-75.178114,\"lng\":40.054118},{\"lat\":-75.152468,\"lng\":40.053586},{\"lat\":-75.065422,\"lng\":40.044755},{\"lat\":-75.129094,\"lng\":40.040291},{\"lat\":-75.129592,\"lng\":40.029476},{\"lat\":-75.156994,\"lng\":40.018797},{\"lat\":-75.138253,\"lng\":40.006924},{\"lat\":-75.135668,\"lng\":40.001818},{\"lat\":-75.140654,\"lng\":39.997434},{\"lat\":-75.131652,\"lng\":39.993691},{\"lat\":-75.116764,\"lng\":39.99314},{\"lat\":-75.158128,\"lng\":39.991936},{\"lat\":-75.250695,\"lng\":39.975156},{\"lat\":-75.152897,\"lng\":39.933789},{\"lat\":-75.174451,\"lng\":39.970173},{\"lat\":-75.057447,\"lng\":40.095671},{\"lat\":-75.203278,\"lng\":40.07491},{\"lat\":-75.076965,\"lng\":40.049174},{\"lat\":-75.119127,\"lng\":40.043621},{\"lat\":-75.051888,\"lng\":40.039321},{\"lat\":-75.046763,\"lng\":40.028267},{\"lat\":-75.066736,\"lng\":40.015904},{\"lat\":-75.102188,\"lng\":40.008412},{\"lat\":-75.173646,\"lng\":39.986614},{\"lat\":-75.248329,\"lng\":39.907459},{\"lat\":-75.171027,\"lng\":40.073089},{\"lat\":-75.159098,\"lng\":40.065104},{\"lat\":-75.027067,\"lng\":40.059522},{\"lat\":-75.142321,\"lng\":40.041454},{\"lat\":-75.036067,\"lng\":40.034641},{\"lat\":-75.120871,\"lng\":40.03108},{\"lat\":-75.172634,\"lng\":40.02499},{\"lat\":-75.058585,\"lng\":40.020256},{\"lat\":-75.085128,\"lng\":40.011962},{\"lat\":-75.191909,\"lng\":40.013261},{\"lat\":-75.154199,\"lng\":40.005547},{\"lat\":-75.173556,\"lng\":40.002226},{\"lat\":-75.219725,\"lng\":39.967409},{\"lat\":-75.177683,\"lng\":39.952182},{\"lat\":-75.20875,\"lng\":39.944659},{\"lat\":-75.216407,\"lng\":39.940865},{\"lat\":-75.150676,\"lng\":39.939587},{\"lat\":-75.170439,\"lng\":39.934875},{\"lat\":-75.159889,\"lng\":39.925912},{\"lat\":-75.168345,\"lng\":39.918877},{\"lat\":-75.028431,\"lng\":40.087927},{\"lat\":-75.149337,\"lng\":40.047691},{\"lat\":-75.024744,\"lng\":40.043359},{\"lat\":-75.104015,\"lng\":40.042286},{\"lat\":-75.150918,\"lng\":40.043277},{\"lat\":-75.167091,\"lng\":40.03339},{\"lat\":-75.176333,\"lng\":40.033632},{\"lat\":-75.163549,\"lng\":40.059443},{\"lat\":-75.171651,\"lng\":39.955725},{\"lat\":-75.205549,\"lng\":39.970724},{\"lat\":-75.169149,\"lng\":39.94486},{\"lat\":-75.143928,\"lng\":39.963851},{\"lat\":-75.101867,\"lng\":39.998183},{\"lat\":-75.094497,\"lng\":40.020402},{\"lat\":-75.245352,\"lng\":39.91657},{\"lat\":-75.076608,\"lng\":40.053497},{\"lat\":-75.163886,\"lng\":39.972789},{\"lat\":-75.04363,\"lng\":40.027613},{\"lat\":-75.247886,\"lng\":39.953481},{\"lat\":-75.174398,\"lng\":39.919315},{\"lat\":-75.149611,\"lng\":39.946043},{\"lat\":-75.066454,\"lng\":40.01786},{\"lat\":-75.115936,\"lng\":40.027396},{\"lat\":-75.127551,\"lng\":39.975411},{\"lat\":-75.225824,\"lng\":40.028248},{\"lat\":-75.221722,\"lng\":40.026381},{\"lat\":-75.219851,\"lng\":40.025471},{\"lat\":-75.249069,\"lng\":39.9697},{\"lat\":-75.228061,\"lng\":39.964508},{\"lat\":-75.224112,\"lng\":40.028051},{\"lat\":-75.22819,\"lng\":40.032833},{\"lat\":-75.219507,\"lng\":40.025032},{\"lat\":-75.193754,\"lng\":40.011314},{\"lat\":-75.247766,\"lng\":39.984684},{\"lat\":-75.189481,\"lng\":39.930474},{\"lat\":-74.985047,\"lng\":40.08757},{\"lat\":-75.03899,\"lng\":40.081915},{\"lat\":-74.979315,\"lng\":40.078994},{\"lat\":-74.995299,\"lng\":40.075274},{\"lat\":-75.210183,\"lng\":40.07926},{\"lat\":-75.188715,\"lng\":40.061742},{\"lat\":-75.030232,\"lng\":40.055642},{\"lat\":-75.062446,\"lng\":40.053392},{\"lat\":-75.097373,\"lng\":40.048374},{\"lat\":-75.128335,\"lng\":40.044396},{\"lat\":-75.06302,\"lng\":40.037882},{\"lat\":-75.237894,\"lng\":39.975073},{\"lat\":-75.234534,\"lng\":40.064413},{\"lat\":-75.135227,\"lng\":39.981209},{\"lat\":-75.154085,\"lng\":40.061692},{\"lat\":-75.151486,\"lng\":40.050592},{\"lat\":-75.081281,\"lng\":40.07708},{\"lat\":-75.169563,\"lng\":39.995547},{\"lat\":-75.102017,\"lng\":39.984955},{\"lat\":-74.972314,\"lng\":40.102393},{\"lat\":-75.035659,\"lng\":40.03364},{\"lat\":-75.010034,\"lng\":40.124447},{\"lat\":-75.227011,\"lng\":39.921968},{\"lat\":-75.193705,\"lng\":39.935261},{\"lat\":-75.015575,\"lng\":40.046896},{\"lat\":-75.215493,\"lng\":39.947768},{\"lat\":-75.129973,\"lng\":40.003675},{\"lat\":-75.163251,\"lng\":39.91286},{\"lat\":-75.126792,\"lng\":39.989886},{\"lat\":-75.17469,\"lng\":39.930394},{\"lat\":-75.167116,\"lng\":40.071983},{\"lat\":-75.17853,\"lng\":39.91356},{\"lat\":-75.060425,\"lng\":40.030785},{\"lat\":-75.144875,\"lng\":39.969586},{\"lat\":-75.049966,\"lng\":40.041433},{\"lat\":-75.129627,\"lng\":39.976678},{\"lat\":-75.146654,\"lng\":40.032866},{\"lat\":-75.130868,\"lng\":40.028885},{\"lat\":-75.037768,\"lng\":40.026418},{\"lat\":-75.144714,\"lng\":40.013513},{\"lat\":-75.101608,\"lng\":40.011688},{\"lat\":-75.138974,\"lng\":40.004904},{\"lat\":-75.115755,\"lng\":39.998684},{\"lat\":-75.093347,\"lng\":39.988581},{\"lat\":-75.105776,\"lng\":39.987237},{\"lat\":-75.102599,\"lng\":39.986932},{\"lat\":-75.118844,\"lng\":39.981628},{\"lat\":-75.119791,\"lng\":39.98194},{\"lat\":-75.110317,\"lng\":39.981545},{\"lat\":-75.217616,\"lng\":39.970637},{\"lat\":-75.244749,\"lng\":39.968263},{\"lat\":-75.176864,\"lng\":39.966564},{\"lat\":-75.154983,\"lng\":39.957542},{\"lat\":-75.163643,\"lng\":39.933395},{\"lat\":-75.149391,\"lng\":39.930728},{\"lat\":-75.167523,\"lng\":39.922588},{\"lat\":-75.176269,\"lng\":39.920955},{\"lat\":-75.180155,\"lng\":39.909569},{\"lat\":-75.074584,\"lng\":40.000363},{\"lat\":-75.163003,\"lng\":40.027109},{\"lat\":-75.154167,\"lng\":39.91618},{\"lat\":-75.151884,\"lng\":39.918872},{\"lat\":-75.141144,\"lng\":39.983392},{\"lat\":-75.168017,\"lng\":39.964887},{\"lat\":-75.212487,\"lng\":39.961928},{\"lat\":-75.193626,\"lng\":39.960313},{\"lat\":-75.153871,\"lng\":39.936723},{\"lat\":-75.17591,\"lng\":39.934877},{\"lat\":-75.150576,\"lng\":39.927091},{\"lat\":-75.155533,\"lng\":39.917103},{\"lat\":-75.138638,\"lng\":39.992627},{\"lat\":-74.976628,\"lng\":40.080407},{\"lat\":-75.114276,\"lng\":39.999512},{\"lat\":-75.180107,\"lng\":39.980697},{\"lat\":-75.245752,\"lng\":39.981747},{\"lat\":-75.238544,\"lng\":39.964322},{\"lat\":-75.119655,\"lng\":40.020209},{\"lat\":-75.111645,\"lng\":40.012799},{\"lat\":-74.970678,\"lng\":40.095591},{\"lat\":-75.146138,\"lng\":40.025527},{\"lat\":-75.164982,\"lng\":39.978396},{\"lat\":-75.22931,\"lng\":39.977747},{\"lat\":-75.168218,\"lng\":39.998415},{\"lat\":-75.245036,\"lng\":39.9469},{\"lat\":-75.223267,\"lng\":39.936777},{\"lat\":-75.226927,\"lng\":39.923943},{\"lat\":-75.175113,\"lng\":40.039503},{\"lat\":-75.238644,\"lng\":40.051585},{\"lat\":-75.126531,\"lng\":39.981138},{\"lat\":-75.227158,\"lng\":39.953423},{\"lat\":-75.19784,\"lng\":39.935089},{\"lat\":-75.174842,\"lng\":40.081104},{\"lat\":-75.189952,\"lng\":40.03741},{\"lat\":-75.152184,\"lng\":40.030521},{\"lat\":-75.132296,\"lng\":39.98709},{\"lat\":-75.207023,\"lng\":40.022593},{\"lat\":-75.15857,\"lng\":40.011083},{\"lat\":-75.184004,\"lng\":39.997126},{\"lat\":-75.169918,\"lng\":39.988701},{\"lat\":-75.180765,\"lng\":39.984365},{\"lat\":-75.16865,\"lng\":40.058651},{\"lat\":-75.072602,\"lng\":40.037165},{\"lat\":-75.135189,\"lng\":40.017947},{\"lat\":-75.147718,\"lng\":40.003606},{\"lat\":-75.238136,\"lng\":39.992724},{\"lat\":-75.127706,\"lng\":39.986782},{\"lat\":-75.156208,\"lng\":39.965028},{\"lat\":-75.176217,\"lng\":39.941849},{\"lat\":-75.232661,\"lng\":39.940391},{\"lat\":-75.138548,\"lng\":39.973095},{\"lat\":-75.08228,\"lng\":40.007299},{\"lat\":-75.242676,\"lng\":39.918182},{\"lat\":-75.189527,\"lng\":40.05193},{\"lat\":-75.252014,\"lng\":39.973186},{\"lat\":-75.225664,\"lng\":39.976086},{\"lat\":-75.231467,\"lng\":39.987848},{\"lat\":-75.252021,\"lng\":40.055675},{\"lat\":-75.165444,\"lng\":39.979813},{\"lat\":-75.130734,\"lng\":40.013458},{\"lat\":-75.243042,\"lng\":39.988173},{\"lat\":-75.010048,\"lng\":40.103816},{\"lat\":-75.158653,\"lng\":39.9386},{\"lat\":-75.171433,\"lng\":39.917971},{\"lat\":-75.045266,\"lng\":40.021747},{\"lat\":-75.091086,\"lng\":40.011824},{\"lat\":-75.221495,\"lng\":39.980289},{\"lat\":-75.218565,\"lng\":39.961648},{\"lat\":-75.204954,\"lng\":39.966859},{\"lat\":-75.160691,\"lng\":39.968073},{\"lat\":-75.02423,\"lng\":40.034624},{\"lat\":-75.156221,\"lng\":39.959089},{\"lat\":-75.13403,\"lng\":39.984744},{\"lat\":-75.167723,\"lng\":39.940836},{\"lat\":-75.171303,\"lng\":40.01604},{\"lat\":-75.161336,\"lng\":39.978987},{\"lat\":-75.225287,\"lng\":39.937131},{\"lat\":-75.168542,\"lng\":40.005801},{\"lat\":-75.152811,\"lng\":39.974094},{\"lat\":-75.086757,\"lng\":40.031704},{\"lat\":-74.99293,\"lng\":40.059902},{\"lat\":-75.208818,\"lng\":39.963759},{\"lat\":-75.161021,\"lng\":39.927373},{\"lat\":-75.1606,\"lng\":39.927553},{\"lat\":-75.216248,\"lng\":40.083335},{\"lat\":-75.214861,\"lng\":40.0805},{\"lat\":-75.155988,\"lng\":40.047782},{\"lat\":-75.230084,\"lng\":39.991353},{\"lat\":-75.193776,\"lng\":39.963147},{\"lat\":-75.207548,\"lng\":39.953066},{\"lat\":-75.206752,\"lng\":39.950023},{\"lat\":-75.213406,\"lng\":39.969746},{\"lat\":-75.212224,\"lng\":39.944862},{\"lat\":-75.227418,\"lng\":39.935163},{\"lat\":-75.147049,\"lng\":39.975371},{\"lat\":-75.232378,\"lng\":39.992119},{\"lat\":-75.141408,\"lng\":39.973848},{\"lat\":-75.178169,\"lng\":39.975504},{\"lat\":-75.1395,\"lng\":40.005827},{\"lat\":-75.141942,\"lng\":40.020951},{\"lat\":-75.174806,\"lng\":40.041944},{\"lat\":-75.161794,\"lng\":40.037224},{\"lat\":-75.039185,\"lng\":40.080437},{\"lat\":-75.045049,\"lng\":40.099818},{\"lat\":-75.151566,\"lng\":40.02164},{\"lat\":-75.168038,\"lng\":39.921293},{\"lat\":-75.177688,\"lng\":39.915313},{\"lat\":-75.225489,\"lng\":39.955966},{\"lat\":-75.216873,\"lng\":39.957203},{\"lat\":-75.048906,\"lng\":40.091994},{\"lat\":-75.082536,\"lng\":40.061078},{\"lat\":-75.167209,\"lng\":40.055646},{\"lat\":-75.045142,\"lng\":40.042385},{\"lat\":-75.174221,\"lng\":40.033726},{\"lat\":-75.149297,\"lng\":40.020489},{\"lat\":-75.162,\"lng\":39.981567},{\"lat\":-75.242873,\"lng\":39.954305},{\"lat\":-75.181782,\"lng\":39.946881},{\"lat\":-75.211353,\"lng\":39.955469},{\"lat\":-75.222381,\"lng\":39.954397},{\"lat\":-75.149301,\"lng\":40.023811},{\"lat\":-75.215475,\"lng\":39.971651},{\"lat\":-75.087195,\"lng\":40.015342},{\"lat\":-75.144847,\"lng\":40.048173},{\"lat\":-75.081618,\"lng\":40.047803},{\"lat\":-75.183567,\"lng\":40.049052},{\"lat\":-75.18174,\"lng\":39.910114},{\"lat\":-75.1585,\"lng\":40.067609},{\"lat\":-75.179451,\"lng\":39.979645},{\"lat\":-75.140133,\"lng\":39.994089},{\"lat\":-75.172618,\"lng\":39.976131},{\"lat\":-75.22341,\"lng\":40.027734},{\"lat\":-74.985924,\"lng\":40.056801},{\"lat\":-75.240565,\"lng\":39.959104},{\"lat\":-75.170334,\"lng\":40.033961},{\"lat\":-75.092233,\"lng\":40.049442},{\"lat\":-75.14814,\"lng\":39.942672},{\"lat\":-75.13825,\"lng\":39.991253},{\"lat\":-75.240514,\"lng\":39.927975},{\"lat\":-75.073948,\"lng\":40.019683},{\"lat\":-75.169752,\"lng\":39.984563},{\"lat\":-75.231134,\"lng\":39.985547},{\"lat\":-75.236026,\"lng\":39.974283},{\"lat\":-75.151053,\"lng\":39.995828},{\"lat\":-75.235956,\"lng\":39.948916},{\"lat\":-75.138624,\"lng\":40.028858},{\"lat\":-75.06496,\"lng\":40.007937},{\"lat\":-75.066231,\"lng\":40.066878},{\"lat\":-75.232913,\"lng\":39.965301}]},{\"id\":\"middleSchools\",\"name\":\"Middle Schools\",\"description\":\"Middle Schools\",\"latlngs\":[{\"lat\":-75.242066,\"lng\":39.986453},{\"lat\":-75.1749,\"lng\":40.048117},{\"lat\":-75.17485,\"lng\":40.071424},{\"lat\":-75.07437,\"lng\":40.012785},{\"lat\":-75.052527,\"lng\":40.091245},{\"lat\":-75.16533,\"lng\":40.056411},{\"lat\":-75.147734,\"lng\":40.051817},{\"lat\":-75.117672,\"lng\":40.035728},{\"lat\":-75.114573,\"lng\":39.994432},{\"lat\":-75.044297,\"lng\":40.045799},{\"lat\":-75.12946,\"lng\":40.006096},{\"lat\":-75.112933,\"lng\":39.986301},{\"lat\":-74.987846,\"lng\":40.080694},{\"lat\":-75.069149,\"lng\":40.052379},{\"lat\":-75.232451,\"lng\":39.92147},{\"lat\":-75.159019,\"lng\":39.957882},{\"lat\":-75.153774,\"lng\":39.994375},{\"lat\":-75.228469,\"lng\":39.976059},{\"lat\":-75.174715,\"lng\":40.059595},{\"lat\":-75.24216,\"lng\":39.944338},{\"lat\":-75.247285,\"lng\":39.896157},{\"lat\":-75.215794,\"lng\":39.964433},{\"lat\":-75.226587,\"lng\":39.941744},{\"lat\":-75.127128,\"lng\":39.972643},{\"lat\":-75.09731,\"lng\":39.985375},{\"lat\":-75.122093,\"lng\":40.019367},{\"lat\":-75.120982,\"lng\":40.020346},{\"lat\":-75.148214,\"lng\":39.96771},{\"lat\":-75.218532,\"lng\":39.928385},{\"lat\":-75.180874,\"lng\":40.031881},{\"lat\":-75.145273,\"lng\":40.001437},{\"lat\":-75.165617,\"lng\":39.934161},{\"lat\":-75.125651,\"lng\":39.998925},{\"lat\":-75.185388,\"lng\":39.925744},{\"lat\":-74.971778,\"lng\":40.089712},{\"lat\":-75.098451,\"lng\":39.999474}]},{\"id\":\"highSchools\",\"name\":\"High Schools\",\"description\":\"High Schools\",\"latlngs\":[{\"lat\":-75.23833,\"lng\":39.980964},{\"lat\":-75.219906,\"lng\":39.959002},{\"lat\":-75.160073,\"lng\":39.92518},{\"lat\":-75.168795,\"lng\":39.923608},{\"lat\":-75.179473,\"lng\":40.00907},{\"lat\":-75.025309,\"lng\":40.106162},{\"lat\":-75.223045,\"lng\":40.037231},{\"lat\":-75.117169,\"lng\":39.976219},{\"lat\":-75.16336,\"lng\":39.965046},{\"lat\":-75.071199,\"lng\":40.056187},{\"lat\":-75.166993,\"lng\":39.994856},{\"lat\":-75.112298,\"lng\":39.992819},{\"lat\":-75.174259,\"lng\":39.97606},{\"lat\":-75.195752,\"lng\":39.957909},{\"lat\":-75.150851,\"lng\":39.923765},{\"lat\":-75.013967,\"lng\":40.092034},{\"lat\":-75.162,\"lng\":40.056428},{\"lat\":-75.110536,\"lng\":39.979441},{\"lat\":-75.143066,\"lng\":39.968187},{\"lat\":-75.161933,\"lng\":39.963517},{\"lat\":-75.22229,\"lng\":40.049168},{\"lat\":-75.176395,\"lng\":40.039965},{\"lat\":-75.128311,\"lng\":40.012558},{\"lat\":-75.08515,\"lng\":40.021699},{\"lat\":-75.184147,\"lng\":39.990303},{\"lat\":-75.165293,\"lng\":39.939333},{\"lat\":-75.146067,\"lng\":40.0383},{\"lat\":-75.150256,\"lng\":40.037421},{\"lat\":-75.132907,\"lng\":40.015},{\"lat\":-75.017114,\"lng\":40.104867},{\"lat\":-75.150152,\"lng\":40.011427},{\"lat\":-75.154826,\"lng\":40.049264},{\"lat\":-74.986694,\"lng\":40.085178},{\"lat\":-75.177534,\"lng\":40.005171},{\"lat\":-75.023395,\"lng\":40.048193},{\"lat\":-75.12175,\"lng\":40.046866},{\"lat\":-75.162926,\"lng\":39.927383},{\"lat\":-75.034322,\"lng\":40.031347},{\"lat\":-75.211694,\"lng\":39.957246},{\"lat\":-75.094007,\"lng\":40.00561},{\"lat\":-75.169431,\"lng\":39.95989},{\"lat\":-75.161962,\"lng\":39.958291},{\"lat\":-74.973988,\"lng\":40.082703},{\"lat\":-75.154457,\"lng\":39.98548},{\"lat\":-75.042777,\"lng\":40.04382},{\"lat\":-75.133305,\"lng\":39.977091},{\"lat\":-75.152451,\"lng\":39.950273},{\"lat\":-75.161328,\"lng\":39.9834},{\"lat\":-75.128586,\"lng\":39.984847},{\"lat\":-75.161671,\"lng\":39.9401},{\"lat\":-75.245921,\"lng\":39.898742},{\"lat\":-75.238645,\"lng\":39.95756},{\"lat\":-75.247612,\"lng\":39.906578},{\"lat\":-75.205701,\"lng\":39.956968},{\"lat\":-75.197047,\"lng\":40.062261},{\"lat\":-75.215821,\"lng\":39.964843},{\"lat\":-75.233836,\"lng\":39.921931},{\"lat\":-75.203354,\"lng\":39.975296},{\"lat\":-75.252607,\"lng\":40.062386},{\"lat\":-75.159559,\"lng\":39.962787},{\"lat\":-75.092464,\"lng\":40.03644},{\"lat\":-75.17431,\"lng\":39.952446},{\"lat\":-75.186616,\"lng\":39.928457},{\"lat\":-75.156776,\"lng\":40.056234},{\"lat\":-75.165074,\"lng\":39.950679},{\"lat\":-75.233435,\"lng\":39.95164},{\"lat\":-75.14713,\"lng\":39.949445},{\"lat\":-75.06493,\"lng\":40.007869},{\"lat\":-75.152134,\"lng\":39.948821},{\"lat\":-75.171609,\"lng\":40.072677},{\"lat\":-75.158631,\"lng\":39.972889},{\"lat\":-75.144937,\"lng\":40.033314},{\"lat\":-75.159023,\"lng\":39.95789},{\"lat\":-75.175322,\"lng\":40.071026},{\"lat\":-75.013944,\"lng\":40.129128},{\"lat\":-75.138133,\"lng\":39.994221},{\"lat\":-75.176402,\"lng\":39.971601},{\"lat\":-75.169991,\"lng\":39.947003},{\"lat\":-75.117028,\"lng\":40.03064},{\"lat\":-75.248263,\"lng\":39.989796},{\"lat\":-75.194686,\"lng\":40.053423},{\"lat\":-75.169452,\"lng\":39.946987},{\"lat\":-75.078012,\"lng\":40.058614},{\"lat\":-75.058875,\"lng\":40.068499},{\"lat\":-74.987626,\"lng\":40.059135},{\"lat\":-75.164895,\"lng\":39.973145},{\"lat\":-75.123946,\"lng\":40.028391},{\"lat\":-75.155934,\"lng\":40.014293},{\"lat\":-75.159532,\"lng\":39.962918},{\"lat\":-75.19889,\"lng\":39.933842},{\"lat\":-75.159165,\"lng\":39.951453}]},{\"id\":\"pools\",\"name\":\"Pools\",\"description\":\"A lot of Pools\",\"latlngs\":[{\"lat\":-75.13637712166314,\"lng\":40.03801239916445},{\"lat\":-75.11878189104998,\"lng\":40.03470006635359},{\"lat\":-75.22947342052994,\"lng\":40.03348969646711},{\"lat\":-75.04932555685987,\"lng\":40.029097731649784},{\"lat\":-75.21121031021654,\"lng\":40.02945226728552},{\"lat\":-75.12095860502875,\"lng\":40.02190414225396},{\"lat\":-75.09259193310989,\"lng\":40.02122813578747},{\"lat\":-75.05359717820075,\"lng\":40.01876410262102},{\"lat\":-75.14423183512254,\"lng\":40.017226825645366},{\"lat\":-75.15405532922703,\"lng\":40.01706241010161},{\"lat\":-75.09669702339274,\"lng\":40.01202577839524},{\"lat\":-75.12941185271777,\"lng\":40.00190050488429},{\"lat\":-75.10866334603372,\"lng\":40.000906059594826},{\"lat\":-75.17490152650315,\"lng\":40.00229840054099},{\"lat\":-75.12202655705727,\"lng\":40.00054843591342},{\"lat\":-75.0676724398455,\"lng\":39.999269953128994},{\"lat\":-75.09794047442993,\"lng\":39.9980016857646},{\"lat\":-75.1487240957243,\"lng\":39.99675039298323},{\"lat\":-75.16562566483239,\"lng\":39.99498330526634},{\"lat\":-75.03373846990142,\"lng\":40.10075033498782},{\"lat\":-75.08224034638508,\"lng\":40.07372655843832},{\"lat\":-74.99141900084581,\"lng\":40.06809366210619},{\"lat\":-75.07655215969051,\"lng\":40.05616804232085},{\"lat\":-75.00265206222277,\"lng\":40.05153515173759},{\"lat\":-75.16275833192935,\"lng\":40.05341658059191},{\"lat\":-75.14674603836927,\"lng\":40.05050997863558},{\"lat\":-75.10117997463664,\"lng\":40.04574243162602},{\"lat\":-75.0430148113237,\"lng\":40.04138506452426},{\"lat\":-75.15631722965172,\"lng\":40.04167010717375},{\"lat\":-75.07037084518225,\"lng\":40.03830060948416},{\"lat\":-75.15322178647426,\"lng\":39.91558028780603},{\"lat\":-75.17904787463638,\"lng\":39.915807999583926},{\"lat\":-75.23035840829529,\"lng\":39.91571065915447},{\"lat\":-75.09738435898969,\"lng\":39.99050525348296},{\"lat\":-75.1328216864557,\"lng\":39.98831900270289},{\"lat\":-75.18754425378762,\"lng\":39.9888981785671},{\"lat\":-75.17460620591162,\"lng\":39.98723017381221},{\"lat\":-75.15154094564951,\"lng\":39.98584559551632},{\"lat\":-75.11313888870733,\"lng\":39.98407509860849},{\"lat\":-75.16043970384497,\"lng\":39.981630189529},{\"lat\":-75.11849782224652,\"lng\":39.98050075263846},{\"lat\":-75.16949043844834,\"lng\":39.980337709860585},{\"lat\":-75.2090574512362,\"lng\":39.9789399318086},{\"lat\":-75.1793841770382,\"lng\":39.97788979662845},{\"lat\":-75.21256907472929,\"lng\":39.977844118454584},{\"lat\":-75.15099725447682,\"lng\":39.97544715594729},{\"lat\":-75.23118844780329,\"lng\":39.977101002085824},{\"lat\":-75.14473911406643,\"lng\":39.97325133753868},{\"lat\":-75.13741069308146,\"lng\":39.97283785618121},{\"lat\":-75.12732370659323,\"lng\":39.97208543526909},{\"lat\":-75.1664240802057,\"lng\":39.968415003599745},{\"lat\":-75.15074521444753,\"lng\":39.96785488103633},{\"lat\":-75.23422256689649,\"lng\":39.96789917238212},{\"lat\":-75.20039175478665,\"lng\":39.965985647849465},{\"lat\":-75.21607476820557,\"lng\":39.965829082021024},{\"lat\":-75.14373511665045,\"lng\":39.96264769673193},{\"lat\":-75.21024997860094,\"lng\":39.961678187513165},{\"lat\":-75.2388309422821,\"lng\":39.956416888658815},{\"lat\":-75.23445025329468,\"lng\":39.948762746113175},{\"lat\":-75.18331534432724,\"lng\":39.94600815387806},{\"lat\":-75.21572696787958,\"lng\":39.9431020543175},{\"lat\":-75.17160508035239,\"lng\":39.942031711789966},{\"lat\":-75.21126251657886,\"lng\":39.940241054336575},{\"lat\":-75.16306184078452,\"lng\":39.93842289528953},{\"lat\":-75.17349091862974,\"lng\":39.93842658051972},{\"lat\":-75.19758691797854,\"lng\":39.936169309655845},{\"lat\":-75.22810389251822,\"lng\":39.93478531539442},{\"lat\":-75.18952147672606,\"lng\":39.931296513148645},{\"lat\":-75.15737515227869,\"lng\":39.9229635950156},{\"lat\":-75.1678060176611,\"lng\":39.965786390180085},{\"lat\":-75.1785961885973,\"lng\":39.97732933743113},{\"lat\":-75.14830039916808,\"lng\":39.93068531085468},{\"lat\":-75.10494082908912,\"lng\":40.01466831138162},{\"lat\":-75.22659211628824,\"lng\":39.98264908316289},{\"lat\":-75.16863238901186,\"lng\":40.04555447931668},{\"lat\":-74.96994255969811,\"lng\":40.102687275649444},{\"lat\":-75.18692387131307,\"lng\":39.92548797846393},{\"lat\":-75.20926522262194,\"lng\":39.94160539479351}]},{\"id\":\"parks\",\"name\":\"Parks\",\"description\":\"A lot of Parks\",\"latlngs\":[{\"lat\":-75.21351003543592,\"lng\":40.052241051305806},{\"lat\":-75.2070108986734,\"lng\":39.98930275869718},{\"lat\":-75.04695714415429,\"lng\":40.06770279700218},{\"lat\":-75.25753913378627,\"lng\":39.96271392547754},{\"lat\":-75.1921347467435,\"lng\":39.984015070807416},{\"lat\":-75.10782097450826,\"lng\":40.02631582683638},{\"lat\":-75.01022558375493,\"lng\":40.031051166637596},{\"lat\":-75.18107508973672,\"lng\":39.90141607348737},{\"lat\":-75.25932832630996,\"lng\":39.97926681765563},{\"lat\":-74.99079543491888,\"lng\":40.086632443918745},{\"lat\":-75.14367727236433,\"lng\":40.01684011300395},{\"lat\":-74.96850176008549,\"lng\":40.09835593025186},{\"lat\":-74.98975470793752,\"lng\":40.05463561938078},{\"lat\":-75.09194193428365,\"lng\":40.068753698205214},{\"lat\":-75.1556670943342,\"lng\":40.03404980793954},{\"lat\":-75.01640356408281,\"lng\":40.06479940515385},{\"lat\":-75.21145930648281,\"lng\":39.932202695497054},{\"lat\":-75.18963619176616,\"lng\":40.03484029317508},{\"lat\":-75.20104785327936,\"lng\":40.046040294067275},{\"lat\":-75.16860327751189,\"lng\":40.01865683262053},{\"lat\":-75.2377040850766,\"lng\":40.03442629761955},{\"lat\":-74.964548487067,\"lng\":40.11401299111266},{\"lat\":-75.28164177108593,\"lng\":39.97759514268168},{\"lat\":-75.16318704669385,\"lng\":40.05364661150279},{\"lat\":-75.02212207121936,\"lng\":40.05734229835565},{\"lat\":-75.18060159079252,\"lng\":39.95596233930792},{\"lat\":-75.13174260387247,\"lng\":40.0433523594902},{\"lat\":-75.04343089717361,\"lng\":40.02150903108665},{\"lat\":-74.99415375757542,\"lng\":40.12874806931523},{\"lat\":-74.96923006737303,\"lng\":40.103676569742845},{\"lat\":-75.25138766392114,\"lng\":39.90528974294348},{\"lat\":-74.96825195998827,\"lng\":40.078447399008994},{\"lat\":-75.17937914347057,\"lng\":39.99981859181433},{\"lat\":-75.22239683960785,\"lng\":40.03600117834915},{\"lat\":-75.17136529013266,\"lng\":39.915476427339044},{\"lat\":-75.21250235080899,\"lng\":39.87571421655823},{\"lat\":-74.98228485984616,\"lng\":40.060262859286276},{\"lat\":-75.20503998793878,\"lng\":40.070971800877345},{\"lat\":-74.97316191957945,\"lng\":40.07289776350141},{\"lat\":-75.20168226968416,\"lng\":39.94182346203031},{\"lat\":-75.17694683165422,\"lng\":39.96294598126128},{\"lat\":-74.98112070935997,\"lng\":40.06694356882542},{\"lat\":-75.15033499140337,\"lng\":40.033065671854004},{\"lat\":-75.1505489283695,\"lng\":39.957123029040034},{\"lat\":-75.20979160041489,\"lng\":39.947766354960635},{\"lat\":-75.19000686426403,\"lng\":40.02966429483886},{\"lat\":-75.23715357241424,\"lng\":39.906258392639295},{\"lat\":-75.23159552756641,\"lng\":40.034670243919344},{\"lat\":-75.16575119896397,\"lng\":39.99444101488964},{\"lat\":-75.1766270434913,\"lng\":40.03574653947536},{\"lat\":-75.1286162641462,\"lng\":39.96616604129337},{\"lat\":-75.14551340109205,\"lng\":40.02050692254537},{\"lat\":-75.14967655766212,\"lng\":40.03997792270295},{\"lat\":-75.05402471925152,\"lng\":40.0501172266231},{\"lat\":-75.17853200483809,\"lng\":39.96379061521388},{\"lat\":-75.17188945105157,\"lng\":39.949478055701704},{\"lat\":-75.16103183001412,\"lng\":40.02569870872727},{\"lat\":-75.23773509098555,\"lng\":39.91374856633301},{\"lat\":-75.1523076313938,\"lng\":39.947034627450954},{\"lat\":-75.15043214803696,\"lng\":39.95566648738538},{\"lat\":-75.1346935466369,\"lng\":39.982689159192574},{\"lat\":-75.118865662151,\"lng\":39.99480428061081},{\"lat\":-75.22538620702295,\"lng\":39.95265590717789},{\"lat\":-75.17718720931707,\"lng\":40.0517618660978},{\"lat\":-75.23734253346396,\"lng\":40.06781060477418},{\"lat\":-75.23672452304363,\"lng\":39.97102067973348},{\"lat\":-75.14284610949325,\"lng\":39.97349820402691},{\"lat\":-75.14383549974019,\"lng\":39.95098459991166},{\"lat\":-75.14783170178261,\"lng\":39.94419748601926},{\"lat\":-75.14627037835443,\"lng\":39.98848994537721},{\"lat\":-75.1722655642328,\"lng\":40.03429810113297},{\"lat\":-75.08542398159263,\"lng\":40.07647327616453},{\"lat\":-75.08309502311634,\"lng\":40.01405616640283},{\"lat\":-75.17423024277238,\"lng\":40.005845949306135},{\"lat\":-75.17931897012043,\"lng\":39.940911068807466},{\"lat\":-75.17775722338736,\"lng\":39.931462359723234},{\"lat\":-75.1668461754815,\"lng\":40.03076056488972},{\"lat\":-75.15703982029726,\"lng\":40.02089803644055},{\"lat\":-75.16278253573168,\"lng\":39.98532532834475},{\"lat\":-75.19658334711927,\"lng\":40.048901923004},{\"lat\":-75.15992425556463,\"lng\":39.937865146634515},{\"lat\":-75.14944786222291,\"lng\":39.928929007882566},{\"lat\":-75.15559125031584,\"lng\":39.939250448413006},{\"lat\":-75.13831671965576,\"lng\":40.009076822915816},{\"lat\":-75.20251481624291,\"lng\":40.07351116916135},{\"lat\":-75.17133617708171,\"lng\":39.95848673215251},{\"lat\":-75.17447714901601,\"lng\":40.02735122496874},{\"lat\":-75.22995028526294,\"lng\":40.02947966625703},{\"lat\":-75.15688795320463,\"lng\":39.932359790014566},{\"lat\":-75.14684157324123,\"lng\":39.93028620008676},{\"lat\":-75.15034558637196,\"lng\":39.99973960908738},{\"lat\":-75.1464426025587,\"lng\":39.936514706419075},{\"lat\":-75.17552271878878,\"lng\":39.956709964907134},{\"lat\":-75.16544363541229,\"lng\":40.03353368880772},{\"lat\":-75.17938276442909,\"lng\":39.94228482552951},{\"lat\":-75.21840372900068,\"lng\":40.02542710786673},{\"lat\":-75.14413223839432,\"lng\":39.939626424475435},{\"lat\":-75.09698111131162,\"lng\":39.977996220697655},{\"lat\":-75.17055929626527,\"lng\":39.95813416063162},{\"lat\":-75.15147641209724,\"lng\":39.93297726633862},{\"lat\":-75.24602277279409,\"lng\":39.90827261811634},{\"lat\":-75.23041095289241,\"lng\":39.923237077845116},{\"lat\":-75.16337250243838,\"lng\":39.95246383228056},{\"lat\":-75.18774527913526,\"lng\":40.01808660310753},{\"lat\":-75.1508666958523,\"lng\":39.98953732687733},{\"lat\":-75.10638976750737,\"lng\":39.99926188525612},{\"lat\":-75.04700076424695,\"lng\":40.014255691053755},{\"lat\":-75.15651704788718,\"lng\":39.91949354764685},{\"lat\":-75.08828314180482,\"lng\":40.01698865955035},{\"lat\":-75.18317585591461,\"lng\":39.92036208830968},{\"lat\":-75.17684772352341,\"lng\":39.96180170918409},{\"lat\":-75.21671789015079,\"lng\":39.971258374221264},{\"lat\":-75.15139755156171,\"lng\":40.04217172193801},{\"lat\":-74.98892508303899,\"lng\":40.125044257226854},{\"lat\":-75.15017487869044,\"lng\":39.93360421763298},{\"lat\":-75.22381718320824,\"lng\":39.920109816936},{\"lat\":-75.09219552000545,\"lng\":40.023290783800114},{\"lat\":-74.98948399314214,\"lng\":40.043072073022884},{\"lat\":-75.13899196407657,\"lng\":39.99108273529407},{\"lat\":-75.22822166345874,\"lng\":40.04175504330663},{\"lat\":-75.10338261525214,\"lng\":39.986265354154405},{\"lat\":-75.18080001813011,\"lng\":40.025677331539},{\"lat\":-75.16899453637261,\"lng\":39.961547057168225},{\"lat\":-75.16572379598946,\"lng\":39.95421526869905},{\"lat\":-75.09073120251213,\"lng\":40.008464972862356},{\"lat\":-75.14497783824423,\"lng\":40.03619910124814},{\"lat\":-75.1703449563781,\"lng\":39.95879159134859},{\"lat\":-75.14270296711541,\"lng\":39.944721904332},{\"lat\":-75.22108159209304,\"lng\":40.025641014728144},{\"lat\":-75.17180186278624,\"lng\":39.95794841057438},{\"lat\":-75.13965756960117,\"lng\":39.98574678475676},{\"lat\":-75.1666248167353,\"lng\":40.02200976428287},{\"lat\":-75.23715263762948,\"lng\":39.946804086431676},{\"lat\":-75.16931908908035,\"lng\":39.95784844586043},{\"lat\":-75.16857429005258,\"lng\":40.03049817066964},{\"lat\":-75.14534830146944,\"lng\":40.03453279809631},{\"lat\":-75.19530091314343,\"lng\":40.00910094868168},{\"lat\":-75.18753338381761,\"lng\":40.05666219561769},{\"lat\":-75.16676289988987,\"lng\":39.955545885265906},{\"lat\":-75.23314477202561,\"lng\":39.918702503620075},{\"lat\":-75.22017664755566,\"lng\":40.03040976599274},{\"lat\":-75.19923822706916,\"lng\":40.072660503442606},{\"lat\":-75.12793857916438,\"lng\":39.97934792549658},{\"lat\":-75.20305403623446,\"lng\":40.06715051159961},{\"lat\":-75.16747972331085,\"lng\":39.95523167959929},{\"lat\":-75.22961639733573,\"lng\":39.963443284014694},{\"lat\":-75.01400583392792,\"lng\":40.04701367897327},{\"lat\":-75.10890897902645,\"lng\":39.982530523210016},{\"lat\":-75.15519146391293,\"lng\":39.93289570801132},{\"lat\":-75.16280556920717,\"lng\":39.940663809531706},{\"lat\":-75.16344126763221,\"lng\":39.926443473176995},{\"lat\":-75.2226778145233,\"lng\":39.948223614685084},{\"lat\":-75.24294526867529,\"lng\":39.91008890456973},{\"lat\":-75.13253475860157,\"lng\":39.97488421309102},{\"lat\":-75.22160524891623,\"lng\":39.95380416327046},{\"lat\":-75.17978277556637,\"lng\":39.94759927112827},{\"lat\":-75.2319272612416,\"lng\":39.983419781694785},{\"lat\":-75.1554032700342,\"lng\":39.94069139210946},{\"lat\":-75.1024790551722,\"lng\":40.004114775605736},{\"lat\":-75.21073002611968,\"lng\":40.01772696572934},{\"lat\":-75.14727982733719,\"lng\":39.93741525647675},{\"lat\":-75.16822788755984,\"lng\":39.91570210973157},{\"lat\":-75.16855472859395,\"lng\":39.95677440650404},{\"lat\":-75.14661769287757,\"lng\":39.99934738166813},{\"lat\":-75.15655660806274,\"lng\":39.921258440616064},{\"lat\":-75.16002756574251,\"lng\":39.94516544544014}]}]")
    val mini = Json.stringify(facetsJson)

    val file2 = Play.getFile("/public/data/test.json")
    val facetsJson2 = Json.parse(scala.io.Source.fromFile(file2).mkString)

    def index = Action {
        Ok(views.html.index("Your new application is ready."))
    }

    def cluster(facets: String) = Action {

        val fs = facets.split(",")
        val f = Application.facetsJson.as[List[Facet]]
        val filtered = f.filter(facet => fs.contains(facet.id))
        val latlngs = filtered.foldLeft(List[LatLng]())((b, a) => a.latLngs.get ::: b)
        val locationClusterer = new LocationClusterer

        val clustered = locationClusterer.cluster(latlngs)
        val centroidsAndRadii = clustered.map(locationClusterer.centroidAndRadius)

        val json = Json.toJson(Map("data" -> centroidsAndRadii))
        Ok(json)
    } 
/*
    def transform = Action {
        val latlngs = Application.facetsJson2.as[Features].features.map(feature => LatLng(feature.geometry.coordinates(0), feature.geometry.coordinates(1)))
        val latlngsJson = Json.toJson(latlngs)
        Ok(latlngsJson)
    }
*/
    def facets = Action {
        val f = Application.facetsJson.as[List[Facet]].map(facet => Facet(facet.id, facet.name, facet.description))
        val json = Json.toJson(Map("facets" -> f))
        println(mini)
        Ok(json)
    }
}